"use strict";(self.webpackChunkjohnycho_dev=self.webpackChunkjohnycho_dev||[]).push([[2335],{6034:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>l,frontMatter:()=>c,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"db/db-caching-strategy","title":"\uce90\uc2f1 \uc804\ub7b5","description":"\uce90\uc2dc\ub294 \uc131\ub2a5 \ud5a5\uc0c1\uacfc \ubd80\ud558 \uac10\uc18c\ub97c \ubaa9\ud45c\ub85c \ud569\ub2c8\ub2e4. \uc774\ub54c \uce90\uc2dc\ub97c \uc0ac\uc6a9\ud558\ub294 \uc591\uc0c1\uc774 \uc11c\ube44\uc2a4\uc5d0 \ud070 \uc601\ud5a5\uc744 \ub07c\uce58\uae30\ub3c4 \ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c, \uce90\uc2f1 \uc804\ub7b5\uc744 \uc774\ud574\ud558\ub294 \uac83\uc740 \uc911\uc694\ud569\ub2c8\ub2e4.","source":"@site/docs/db/db-caching-strategy.md","sourceDirName":"db","slug":"/db/db-caching-strategy","permalink":"/joylangcenter/docs/db/db-caching-strategy","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"Database","permalink":"/joylangcenter/docs/tags/db","description":"Database tag description"},{"inline":false,"label":"Cache","permalink":"/joylangcenter/docs/tags/cache","description":"Cache tag description"}],"version":"current","frontMatter":{"slug":"db-caching-strategy","title":"\uce90\uc2f1 \uc804\ub7b5","tags":["db","cache"]},"sidebar":"johnyDocsSidebar","previous":{"title":"\uce90\uc2dc \uc2a4\ud0ec\ud53c\ub4dc \ud604\uc0c1","permalink":"/joylangcenter/docs/db/db-cache-stampede"},"next":{"title":"CAP \uc815\ub9ac (= \ube0c\ub8e8\uc5b4(Brewer)\uc758 \uc815\ub9ac)","permalink":"/joylangcenter/docs/db/db-cap-theorem"}}');var s=i(4848),r=i(8453);const c={slug:"db-caching-strategy",title:"\uce90\uc2f1 \uc804\ub7b5",tags:["db","cache"]},t=void 0,d={},h=[{value:"\u2714\ufe0f Cache Aside (Look Aside, Lazy Loading)",id:"\ufe0f-cache-aside-look-aside-lazy-loading",level:2},{value:"\u2714\ufe0f Read Through",id:"\ufe0f-read-through",level:2},{value:"\u2714\ufe0f Write Through",id:"\ufe0f-write-through",level:2},{value:"\u2714\ufe0f Cache Invalidation",id:"\ufe0f-cache-invalidation",level:2},{value:"\u2714\ufe0f Write Around",id:"\ufe0f-write-around",level:2},{value:"\u2714\ufe0f Write Behind(Write Back)",id:"\ufe0f-write-behindwrite-back",level:2},{value:"\u2714\ufe0f Caffeine Cache",id:"\ufe0f-caffeine-cache",level:2},{value:"\u2714\ufe0f Ehcache",id:"\ufe0f-ehcache",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"\uce90\uc2dc\ub294 \uc131\ub2a5 \ud5a5\uc0c1\uacfc \ubd80\ud558 \uac10\uc18c\ub97c \ubaa9\ud45c\ub85c \ud569\ub2c8\ub2e4. \uc774\ub54c \uce90\uc2dc\ub97c \uc0ac\uc6a9\ud558\ub294 \uc591\uc0c1\uc774 \uc11c\ube44\uc2a4\uc5d0 \ud070 \uc601\ud5a5\uc744 \ub07c\uce58\uae30\ub3c4 \ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c, \uce90\uc2f1 \uc804\ub7b5\uc744 \uc774\ud574\ud558\ub294 \uac83\uc740 \uc911\uc694\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-cache-aside-look-aside-lazy-loading",children:"\u2714\ufe0f Cache Aside (Look Aside, Lazy Loading)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Cache Aside"})," \ubc29\uc2dd\uc740 \uce90\uc2dc \ud788\ud2b8 \uc2dc \uce90\uc2dc\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\uba70, \uce90\uc2dc \ubbf8\uc2a4 \ubc1c\uc0dd \uc2dc \uc6d0\ubcf8 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \uc870\ud68c\ud558\uc5ec \ubc18\ud658\ud569\ub2c8\ub2e4. \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc740 \uce90\uc2dc \ubbf8\uc2a4\uac00 \ubc1c\uc0dd\ud558\uba74 \ud574\ub2f9 \ub370\uc774\ud130\ub97c \uce90\uc2dc\uc5d0 \uc801\uc7ac\ud569\ub2c8\ub2e4.\n",(0,s.jsx)("mark",{children:(0,s.jsx)(n.strong,{children:"\ubcf4\ud1b5 \uac00\uc7a5 \ub9ce\uc774 \uc0ac\uc6a9\ub418\ub294 \uce90\uc2f1 \uc804\ub7b5"})}),"\uc785\ub2c8\ub2e4. Cache\ub294 Database\uc5d0 \uc9c1\uc811 \uc5f0\uacb0\ub418\uc9c0 \uc54a\uace0, application\uc774 \uc8fc\uccb4\uac00 \ub41c\ub2e4."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"Cache Aside",src:i(6676).A+"",width:"1924",height:"990"}),"\n",(0,s.jsx)(n.img,{alt:"Cache Aside",src:i(1167).A+"",width:"1920",height:"1764"})]}),"\n",(0,s.jsx)(n.p,{children:"\ud574\ub2f9 \ubc29\uc2dd\uc740 \uc2e4\uc81c \uc694\uccad\ub41c \ub370\uc774\ud130\ub9cc \uce90\uc2dc\uc5d0 \uc800\uc7a5\ub418\ubbc0\ub85c \ubd88\ud544\uc694\ud55c \ub370\uc774\ud130 \uce90\uc2f1\uc744 \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub610\ud55c, \uce90\uc2dc\uc5d0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud574\ub3c4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc740 \uc6d0\ubcf8 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc9c1\uc811 \uc811\uadfc\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc11c\ube44\uc2a4\uac00 \uacc4\uc18d \uc791\ub3d9\ud560 \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ud558\uc9c0\ub9cc, \uce90\uc2dc \ubbf8\uc2a4\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0\uc5d0\ub9cc \ub370\uc774\ud130\ub97c \uce90\uc2dc\uc5d0 \uc801\uc7ac\ud558\uae30 \ub54c\ubb38\uc5d0 \uc6d0\ubcf8 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc640 \uac19\uc740 \ub370\uc774\ud130\uac00 \uc544\ub2d0 \uc218\ub3c4 \uc788\uc73c\uba70, \ucd08\uae30\uc5d0\ub294 \ub300\ub7c9\uc758 \uce90\uc2dc \ubbf8\uc2a4\ub85c \uc778\ud55c \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubd80\ud558\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-read-through",children:"\u2714\ufe0f Read Through"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"application, cache, database\ub97c inline\uc73c\ub85c \ubc30\uce58"}),"\n",(0,s.jsx)(n.li,{children:"\uce90\uc2dc\uc5d0 \ub370\uc774\ud130\uac00 \ub204\ub77d\ub41c \uacbd\uc6b0 \ub370\uc774\ud130 \ubca0\uc774\uc2a4\uc5d0\uc11c \ub204\ub77d\ub41c \ub370\uc774\ud130\ub97c \uc870\ud68c\ud558\uc5ec \uce90\uc2dc\uc5d0 \ucc44\uc6b0\uace0 application\uc5d0 \ubc18\ud658"}),"\n",(0,s.jsx)(n.li,{children:"Cache Aside, read-through \ubaa8\ub450 \ub370\uc774\ud130\ub97c lazing load\ud55c\ub2e4. \uc989, \ub370\uc774\ud130\ub97c \uc77d\uc744\ub54c\ub9cc \uc870\ud68c\ud55c\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"Application\uc740 Cache Aside\uc640 \ub2ec\ub9ac Cache\ub9cc \ubc14\ub77c\ubcf8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"Cache\uac00 \uc8fc\uccb4(main data store)\uc774\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"\ub370\uc774\ud130 \ub3d9\uae30\ud654 \uc5ed\ud560\uc740 Cache\uc5d0\uac8c \uc704\uc784\ud55c\ub2e4."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"Read Through",src:i(7405).A+"",width:"1956",height:"496"}),"\n",(0,s.jsx)(n.img,{alt:"Read Through",src:i(5782).A+"",width:"1908",height:"1218"})]}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-write-through",children:"\u2714\ufe0f Write Through"}),"\n",(0,s.jsx)(n.p,{children:"\uc6d0\ubcf8 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \ubcc0\uacbd\ubd84\uc774 \uc0dd\uae34 \uacbd\uc6b0, \ub9e4\ubc88 \uce90\uc2dc\uc5d0 \ud574\ub2f9 \ub370\uc774\ud130\ub97c \ucc3e\uc544 \ud568\uaed8 \ubcc0\uacbd\ud558\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. 2\ubc88 \uc4f0\uae30\uac00 \ubc1c\uc0dd\ud558\uc9c0\ub9cc, \uce90\uc2dc\ub294 \ud56d\uc0c1 \ucd5c\uc2e0 \ub370\uc774\ud130\ub97c \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uce90\uc2dc\ub294 \ub2e4\uc2dc \uc870\ud68c\ub418\ub294 \uacbd\uc6b0\uc5d0 \ube5b\uc744 \ubc1c\ud718\ud569\ub2c8\ub2e4. \ubb34\uc791\uc815 \ub370\uc774\ud130\ub97c \uac31\uc2e0\ud558\uac70\ub098 \uc800\uc7a5\ud558\ub294 \ubc29\uc2dd\uc740 \ub9ac\uc18c\uc2a4 \ub0ad\ube44\uac00 \ub420 \uc218 \uc788\uc73c\ub2c8 \ud574\ub2f9 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0, \ub9cc\ub8cc \uc2dc\uac04\uc744 \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uad8c\uc7a5\ub429\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"Write Through",src:i(7588).A+"",width:"2006",height:"544"}),"\n",(0,s.jsx)(n.img,{alt:"Write Through",src:i(9055).A+"",width:"1754",height:"1332"})]}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-cache-invalidation",children:"\u2714\ufe0f Cache Invalidation"}),"\n",(0,s.jsxs)(n.p,{children:["\uc6d0\ubcf8 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \ubcc0\uacbd\ubd84\uc774 \uc0dd\uae34 \uacbd\uc6b0, \uce90\uc2dc \ub370\uc774\ud130\ub97c \ub9cc\ub8cc\uc2dc\ud0a4\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. ",(0,s.jsx)(n.code,{children:"Write Through"})," \ubc29\uc2dd\uc758 \ub2e8\uc810\uc744 \ubcf4\uc644\ud55c \ubc29\uc2dd\uc774\uba70 \uce90\uc2dc\uc5d0 \ub370\uc774\ud130\uac00 \uc0ad\uc81c\ub418\ub2c8 \uce90\uc2dc \ubd88\uc77c\uce58\uc5d0 \ub300\ud55c \uac71\uc815\uc744 \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub429\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-write-around",children:"\u2714\ufe0f Write Around"}),"\n",(0,s.jsx)(n.p,{children:"\uc6d0\ubcf8 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \ubcc0\uacbd\ubd84\uc774 \uc0dd\uae34 \uacbd\uc6b0, \uce90\uc2dc\ub97c \uac70\uce58\uc9c0 \uc54a\uace0 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\ub9cc \uae30\ub85d\ud558\uace0, \uc77d\ub294 \ub370\uc774\ud130\ub9cc \uce90\uc2dc\uc5d0 \uc800\uc7a5\ud558\ub294 \uc804\ub7b5\uc785\ub2c8\ub2e4. \uae30\ub85d\ud558\ub294 \ub370\uc774\ud130\uac00 \uc790\uc8fc \uc0ac\uc6a9\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0\uc5d0 \uc801\ud569\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Write Around",src:i(3770).A+"",width:"974",height:"1076"})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-write-behindwrite-back",children:"\u2714\ufe0f Write Behind(Write Back)"}),"\n",(0,s.jsx)(n.p,{children:"\uc6d0\ubcf8 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \ubcc0\uacbd\ubd84\uc774 \uc0dd\uae34 \uacbd\uc6b0, \uce90\uc2dc\ub97c \uba3c\uc800 \uc5c5\ub370\uc774\ud2b8\ud55c \uc774\ud6c4 \ucd94\ud6c4\uc5d0 \uc6d0\ubcf8 \ub370\uc774\ud130\ub97c \ubcc0\uacbd\ud569\ub2c8\ub2e4. \ub514\uc2a4\ud06c \uc4f0\uae30 \uc791\uc5c5\uc744 \ube44\ub3d9\uae30 \uc791\uc5c5\uc73c\ub85c \uc218\ud589\ud558\uc5ec \uc131\ub2a5\uc744 \uac1c\uc120\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc6d0\ubcf8 \ub370\uc774\ud130\uc640 \uce90\uc2dc\uac00 \uc77c\uc2dc\uc801\uc73c\ub85c \uc77c\uce58\ud558\uc9c0 \uc54a\uc744 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc4f0\uae30 \uc791\uc5c5\uc774 \ube48\ubc88\ud558\uba70 \uc77c\uc2dc\uc801\uc778 \uce90\uc2dc \ubd88\uc77c\uce58\ub97c \ud5c8\uc6a9\ud558\ub294 \uc11c\ube44\uc2a4\uc5d0\uc11c \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"Write Back",src:i(9410).A+"",width:"1404",height:"388"}),"\n",(0,s.jsx)(n.img,{alt:"Write Back",src:i(7593).A+"",width:"1816",height:"1540"})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h1,{id:"\uce90\uc2dc-\uc2dc\uc2a4\ud15c-\uc608\uc2dc",children:"\uce90\uc2dc \uc2dc\uc2a4\ud15c \uc608\uc2dc"}),"\n",(0,s.jsx)(n.p,{children:"Ehcache, Caffeine \ub4f1 Java \uae30\ubc18 \uce90\uc2dc \uc194\ub8e8\uc158\uc740 Cache Loader\uc640 \uac19\uc740 \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uc5ec \uce90\uc2dc \uc2dc\uc2a4\ud15c\uc774 \uc9c1\uc811 DB\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ub85c\ub529\ud574\uc624\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:"Redis\ub294 \uc790\uccb4\uc801\uc73c\ub85c \uc9c1\uc811 DB\uc5d0 \uc811\uadfc\ud558\uc5ec \uc790\ub3d9\uc73c\ub85c \ub85c\ub529\ud558\ub294 \uae30\ub2a5\uc744 \ub0b4\uc7a5\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \uc9c1\uc811 \uad6c\ud604\ud544\uc694(\uacb0\uad6d Cache Aside \uc804\ub7b5)"}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-caffeine-cache",children:"\u2714\ufe0f Caffeine Cache"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"// \uc608\uc2dc (Caffeine Cache \uc0ac\uc6a9)\nimport com.github.benmanes.caffeine.cache.Caffeine;\nimport com.github.benmanes.caffeine.cache.LoadingCache;\nimport java.util.concurrent.TimeUnit;\n\npublic class UserCache {\n\n  private final LoadingCache<Long, User> cache;\n\n  public UserCache(UserRepository userRepository) {\n    this.cache = Caffeine.newBuilder()\n        .maximumSize(1000)\n        .expireAfterWrite(10, TimeUnit.MINUTES)\n        .build(userId -> userRepository.findById(userId)); // \uce90\uc2dc \ub85c\ub529 \ub85c\uc9c1\n  }\n\n  public User getUser(Long userId) {\n    // \uce90\uc2dc\uc5d0\uc11c \uc870\ud68c. Miss\uc2dc \uc790\ub3d9\uc73c\ub85c DB\uc5d0\uc11c \ub85c\ub529\ud558\uc5ec \uc800\uc7a5\n    return cache.get(userId);\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-ehcache",children:"\u2714\ufe0f Ehcache"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"package com.example;\n\nimport org.ehcache.spi.loaderwriter.CacheLoader;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class UserCacheLoader implements CacheLoader<Long, User> {\n\n    private final UserRepository userRepository;\n\n    public UserCacheLoader() {\n        // \uc77c\ubc18\uc801\uc73c\ub85c Spring \ucee8\ud14d\uc2a4\ud2b8\ub97c \ud1b5\ud574 \uac00\uc838\uc634\n        this.userRepository = ApplicationContextProvider.getBean(UserRepository.class);\n    }\n\n    @Override\n    public User load(Long userId) throws Exception {\n        // Ehcache\uac00 \uc774 \uba54\uc11c\ub4dc\ub97c \uce90\uc2dc Miss\uc2dc \uc790\ub3d9 \ud638\ucd9c\n        return userRepository.findById(userId);\n    }\n\n    @Override\n    public Map<Long, User> loadAll(Iterable<? extends Long> userIds) throws Exception {\n        Map<Long, User> users = new HashMap<>();\n        for (Long id : userIds) {\n            users.put(id, userRepository.findById(id));\n        }\n        return users;\n    }\n}\n"})})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},6676:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/cache-aside-1-a61a4773eb1b4fc0fa7f4f4800fbe655.png"},1167:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/cache-aside-2-69473a976c9a80089b974309b021db48.png"},7405:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/read-through-1-6f8b294e7e6ffb2d03d296740d807942.png"},5782:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/read-through-2-76bff7569b455e72df91cf8b85961a69.png"},3770:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/write-around-010c059afaaa69cdc9b17692a33a36a7.png"},9410:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/write-back-1-91b16c999fa5c3dc5f295deef93a86d8.png"},7593:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/write-back-2-56ab8e5cb5d07228762b8ffd85f541a4.png"},7588:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/write-through-1-b36187a387f8809c70d8be3c477b3ac3.png"},9055:(e,n,i)=>{i.d(n,{A:()=>a});const a=i.p+"assets/images/write-through-2-127d3a6df444fcadc48ac7613d09196e.png"},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>t});var a=i(6540);const s={},r=a.createContext(s);function c(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);