"use strict";(self.webpackChunkjohnycho_dev=self.webpackChunkjohnycho_dev||[]).push([[4432],{9591:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>a});const c=JSON.parse('{"id":"spring-data-jpa/jpa-one-to-one-lazy-loading","title":"OneToOne \uc5f0\uad00\uad00\uacc4 Lazy Loading \ubb38\uc81c","description":"\uc591\ubc29\ud5a5 @OneToOne\uc77c \ub54c \uc5f0\uad00\uad00\uacc4\uc758 \uc8fc\uc778\uc774 \uc544\ub2cc \uc5d4\ud2f0\ud2f0\ub97c \uc870\ud68c\ud560 \uacbd\uc6b0 Lazy Loading\uc774 \ub3d9\uc791\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","source":"@site/docs/spring-data-jpa/jpa-one-to-one-lazy-loading.md","sourceDirName":"spring-data-jpa","slug":"/spring-data-jpa/jpa-one-to-one-lazy-loading","permalink":"/docs/spring-data-jpa/jpa-one-to-one-lazy-loading","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"Spring","permalink":"/docs/tags/spring","description":"Spring Framework tag description"},{"inline":false,"label":"JPA","permalink":"/docs/tags/jpa","description":"JPA tag description"}],"version":"current","frontMatter":{"slug":"jpa-one-to-one-lazy-loading","title":"OneToOne \uc5f0\uad00\uad00\uacc4 Lazy Loading \ubb38\uc81c","tags":["spring","jpa"]},"sidebar":"johnyDocsSidebar","previous":{"title":"\uc0c8\ub85c\uc6b4 Entity \ud310\ub2e8 \uae30\uc900","permalink":"/docs/spring-data-jpa/jpa-new-entity"},"next":{"title":"Database","permalink":"/docs/category/database"}}');var d=s(4848),t=s(8453);const r={slug:"jpa-one-to-one-lazy-loading",title:"OneToOne \uc5f0\uad00\uad00\uacc4 Lazy Loading \ubb38\uc81c",tags:["spring","jpa"]},i=void 0,o={},a=[{value:"\u2757\ubb38\uc81c: @OneToOne(fetch = LAZY)\uac00 \uae30\ub300\ud55c \ub300\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\ub294 \uc774\uc720",id:"\ubb38\uc81c-onetoonefetch--lazy\uac00-\uae30\ub300\ud55c-\ub300\ub85c-\ub3d9\uc791\ud558\uc9c0-\uc54a\ub294-\uc774\uc720",level:3},{value:"\u2705 \ud574\uacb0\ucc45 1 \u2013 <code>optional = false</code> \uc124\uc815 (<code>Hibernate</code> \ud2b9\uc815 \ubc84\uc804 \ud55c\uc815)",id:"-\ud574\uacb0\ucc45-1--optional--false-\uc124\uc815-hibernate-\ud2b9\uc815-\ubc84\uc804-\ud55c\uc815",level:3},{value:"\u2705 \ud574\uacb0\ucc45 2 \u2013 <code>@MapsId</code> \uc774\uc6a9\ud55c \ub2e8\ubc29\ud5a5 \uacf5\uc720 PK \ub9e4\ud551 (\uac00\uc7a5 \uc548\uc815\uc801)",id:"-\ud574\uacb0\ucc45-2--mapsid-\uc774\uc6a9\ud55c-\ub2e8\ubc29\ud5a5-\uacf5\uc720-pk-\ub9e4\ud551-\uac00\uc7a5-\uc548\uc815\uc801",level:3},{value:"\ud83d\udccc fetch \ud0c0\uc785 \uae30\ubcf8 \uac12",id:"-fetch-\ud0c0\uc785-\uae30\ubcf8-\uac12",level:2},{value:"\ud83d\udd17 \ub808\ud37c\ub7f0\uc2a4",id:"-\ub808\ud37c\ub7f0\uc2a4",level:2}];function l(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.p,{children:["\uc591\ubc29\ud5a5 ",(0,d.jsx)(n.code,{children:"@OneToOne"}),"\uc77c \ub54c \uc5f0\uad00\uad00\uacc4\uc758 \uc8fc\uc778\uc774 \uc544\ub2cc \uc5d4\ud2f0\ud2f0\ub97c \uc870\ud68c\ud560 \uacbd\uc6b0 Lazy Loading\uc774 \ub3d9\uc791\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."]}),"\n",(0,d.jsxs)(n.p,{children:["JPA\ub294 ",(0,d.jsx)("mark",{children:(0,d.jsx)(n.strong,{children:"\uc5f0\uad00\ub41c \uc5d4\ud2f0\ud2f0\uac00 \uc5c6\uc73c\uba74 null\ub85c \ucd08\uae30\ud654\ud558\uace0, \uc788\uc73c\uba74 Lazy Loading\uc774 \uc124\uc815\ub418\uc5b4 \uc788\uc744 \uacbd\uc6b0 \ud504\ub85d\uc2dc \uac1d\uccb4\ub85c \ucd08\uae30\ud654"})}),"\ud569\ub2c8\ub2e4. \ud558\uc9c0\ub9cc \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 \ud14c\uc774\ube14 \uad00\uc810\uc5d0\uc11c \ubcf4\uba74, \uc5f0\uad00\uad00\uacc4\uc758 \uc8fc\uc778\uc774 \uc544\ub2cc \uc5d4\ud2f0\ud2f0\ub294 \uc5f0\uad00\uad00\uacc4\ub97c \ucc38\uc870\ud560 FK\uac00 \uc5c6\uae30 \ub54c\ubb38\uc5d0 \uc5f0\uad00\uad00\uacc4\uc758 \uc874\uc7ac \uc5ec\ubd80\ub97c \uc54c\uc9c0 \ubabb\ud569\ub2c8\ub2e4. \uadf8\ub798\uc11c ",(0,d.jsx)("mark",{children:(0,d.jsx)(n.strong,{children:"JPA\ub294 null \ud639\uc740 \ud504\ub85d\uc2dc \uac1d\uccb4 \uc911 \ubb34\uc5c7\uc73c\ub85c \ucd08\uae30\ud654\ud560\uc9c0 \uacb0\uc815\ud560 \uc218 \uc5c6\uac8c \ub418\uace0, \uacb0\uacfc\uc801\uc73c\ub85c \uc5f0\uad00\ub41c \uc5d4\ud2f0\ud2f0\uc758 \uc874\uc7ac \uc5ec\ubd80\ub97c \ud655\uc778\ud558\ub294 \ucd94\uac00 \ucffc\ub9ac\ub97c \uc2e4\ud589"})}),"\ud558\uae30 \ub54c\ubb38\uc5d0 Lazy Loading\uc774 \ub3d9\uc791\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."]}),"\n",(0,d.jsx)(n.p,{children:"JPA\uc758 \ud55c\uacc4\uc774\uae30 \ub54c\ubb38\uc5d0 \ub2e8\ubc29\ud5a5\uc73c\ub85c \ubaa8\ub378\ub9c1\ud558\uac70\ub098 Lazy Loading\uc774 \uc815\ub9d0 \ud544\uc694\ud55c \uac83\uc778\uc9c0 \ub2e4\uc2dc \uac80\ud1a0\ud574 \ubcf4\uc544\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-java",children:'// \uc5f0\uad00 \uad00\uacc4 \uc8fc\uc778\uc774 \uc544\ub2d8\n@Entity(name = "users")\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @OneToOne(mappedBy = "user", fetch = FetchType.LAZY)\n    private Account account;\n}\n\n// \uc5f0\uad00 \uad00\uacc4 \uc8fc\uc778\n@Entity\npublic class Account {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = "user_id") // \uc0dd\ub7b5 \uac00\ub2a5\n    private User user;\n}\n'})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-java",children:"@Test\nvoid lazyTest() {\n    userRepository.save(new User());\n\n    userRepository.findById(1L).orElseThrow();\n}\n"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{alt:"OneToOne Result",src:s(8546).A+"",width:"504",height:"694"})}),"\n",(0,d.jsxs)(n.p,{children:["JPA\uc5d0\uc11c ",(0,d.jsx)("mark",{children:(0,d.jsx)(n.strong,{children:"\uc5f0\uad00\uad00\uacc4\uc758 \uc8fc\uc778(Owning side)"})}),"\uc774\ub77c\ub294 \ub9d0\uc740 ",(0,d.jsx)("mark",{children:(0,d.jsx)(n.strong,{children:"\uc678\ub798 \ud0a4(Foreign Key)\ub97c \uc2e4\uc81c\ub85c \uceec\ub7fc\uc73c\ub85c \uac00\uc9c0\uace0 \uc788\ub294 \ucabd\uc744 \uc758\ubbf8"})}),"\ud569\ub2c8\ub2e4."]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"User"})," \uc5d4\ud2f0\ud2f0\uc5d0\uc11c ",(0,d.jsx)(n.code,{children:'mappedBy = "user"'}),"\ub77c\uace0 \uba85\uc2dc\ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c, \uc704 \ucf54\ub4dc\uc5d0\uc11c \uc5f0\uad00\uad00\uacc4\uc758 \uc8fc\uc778\uc740 ",(0,d.jsx)(n.code,{children:"Account"})," \uc5d4\ud2f0\ud2f0\uc785\ub2c8\ub2e4."]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Account"})," \ud14c\uc774\ube14\uc5d0\ub294 ",(0,d.jsx)(n.code,{children:"user_id"}),"\ub77c\ub294 \uc678\ub798\ud0a4 \uceec\ub7fc\uc774 \uc874\uc7ac\ud558\uc9c0\ub9cc, ",(0,d.jsx)(n.code,{children:"User"})," \ud14c\uc774\ube14\uc5d0\ub294 ",(0,d.jsx)(n.code,{children:"account_id"})," \uac19\uc740 \uceec\ub7fc\uc740 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ub530\ub77c\uc11c JPA \uc785\uc7a5\uc5d0\uc11c\ub294 ",(0,d.jsx)(n.code,{children:"User"}),"\ub97c \uc870\ud68c\ud560 \ub54c, \uadf8\uc5d0 \ud574\ub2f9\ud558\ub294 ",(0,d.jsx)(n.code,{children:"Account"}),"\uac00 \uc874\uc7ac\ud558\ub294\uc9c0\ub97c \ud655\uc778\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc9c1\uc811 \ucffc\ub9ac\ub97c \ub0a0\ub824\uc11c \ucc3e\uc544\ubd10\uc57c \ud569\ub2c8\ub2e4.\n\uc65c\ub0d0\ud558\uba74 ",(0,d.jsx)(n.code,{children:"User"})," \ud14c\uc774\ube14\uc5d0\ub294 ",(0,d.jsx)(n.code,{children:"Account"}),"\uac00 \uc788\ub294\uc9c0 \uc9c1\uc811\uc801\uc73c\ub85c \uc54c \uc218 \uc788\ub294 \uceec\ub7fc(FK)\uc774 \uc5c6\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4."]}),"\n",(0,d.jsxs)(n.p,{children:["\uc989, \uc5f0\uad00\uad00\uacc4\uc758 \uc8fc\uc778\uc774 \uc544\ub2cc ",(0,d.jsx)(n.code,{children:"User"})," \uc5d4\ud2f0\ud2f0\ub294 (DB \ud14c\uc774\ube14\uc5d0) \uc678\ub798 \ud0a4\ub97c \uc9c1\uc811 \uac00\uc9c0\uace0 \uc788\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0, ",(0,d.jsx)(n.code,{children:"JPA"}),"\ub294 \uc5f0\uad00\ub41c \uc5d4\ud2f0\ud2f0\uac00 \uc874\uc7ac\ud558\ub294\uc9c0 \uc5ec\ubd80\ub97c \uc54c \uc218 \uc5c6\uace0, \ucd94\uac00 \ucffc\ub9ac\ub97c \ud1b5\ud574 \ud655\uc778\ud560 \uc218 \ubc16\uc5d0 \uc5c6\uc2b5\ub2c8\ub2e4."]}),"\n",(0,d.jsx)(n.h3,{id:"\ubb38\uc81c-onetoonefetch--lazy\uac00-\uae30\ub300\ud55c-\ub300\ub85c-\ub3d9\uc791\ud558\uc9c0-\uc54a\ub294-\uc774\uc720",children:"\u2757\ubb38\uc81c: @OneToOne(fetch = LAZY)\uac00 \uae30\ub300\ud55c \ub300\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\ub294 \uc774\uc720"}),"\n",(0,d.jsxs)(n.p,{children:["\uc77c\ub300\uc77c \uc591\ubc29\ud5a5 \ub9e4\ud551\uc5d0\uc11c \uc18c\uc720\uc790\uac00 \uc544\ub2cc \ucabd(",(0,d.jsx)(n.code,{children:"Account"}),")\uc5d0\uc11c\ub294 \uc678\ub798\ud0a4\uac00 \uc5c6\uc73c\ubbc0\ub85c, ",(0,d.jsx)(n.code,{children:"Hibernate"}),"\ub294 \ud574\ub2f9 \uad00\uacc4\uac00 \uc874\uc7ac\ud558\ub294\uc9c0 \uc54c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ub530\ub77c\uc11c \uc5f0\uad00 \ub300\uc0c1\uc774 \uc5c6\uc744 \uc218\ub3c4 \uc788\ub2e4\ub294 \ud310\ub2e8\uc744 \ud558\ub824\uba74, \ubb34\uc870\uac74 \ucd94\uac00 \ucffc\ub9ac\ub85c \ud655\uc778\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774\ub85c \uc778\ud574 \ud56d\uc0c1 ",(0,d.jsx)(n.code,{children:"EAGER"})," \ub85c\ub529\ucc98\ub7fc \ub3d9\uc791\ud558\uac8c \ub429\ub2c8\ub2e4."]}),"\n",(0,d.jsxs)(n.h3,{id:"-\ud574\uacb0\ucc45-1--optional--false-\uc124\uc815-hibernate-\ud2b9\uc815-\ubc84\uc804-\ud55c\uc815",children:["\u2705 \ud574\uacb0\ucc45 1 \u2013 ",(0,d.jsx)(n.code,{children:"optional = false"})," \uc124\uc815 (",(0,d.jsx)(n.code,{children:"Hibernate"})," \ud2b9\uc815 \ubc84\uc804 \ud55c\uc815)"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-java",children:'// \uc5f0\uad00 \uad00\uacc4 \uc8fc\uc778\uc774 \uc544\ub2d8\n@Entity(name = "users")\npublic class User {\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n\n  @OneToOne(mappedBy = "user", fetch = FetchType.LAZY, optional = false)\n  private Account account;\n}\n'})}),"\n",(0,d.jsxs)(n.p,{children:["\uc774 \uc124\uc815\uc740 ",(0,d.jsx)(n.code,{children:"Account"}),"\uac00 null\uc774 \uc544\ub2d8\uc744 \ubcf4\uc7a5\ud558\ubbc0\ub85c \ud504\ub85d\uc2dc \ucd08\uae30\ud654\uac00 \uac00\ub2a5\ud574\uc9d1\ub2c8\ub2e4.",(0,d.jsx)(n.br,{}),"\n","\u2757\ud558\uc9c0\ub9cc \ubaa8\ub4e0 ",(0,d.jsx)(n.code,{children:"Hibernate"})," \ubc84\uc804\uc5d0\uc11c \uc9c0\uc6d0\ub418\ub294 \uac83\uc740 \uc544\ub2d9\ub2c8\ub2e4. \uc801\uc6a9 \uc5ec\ubd80\ub294 \ubc84\uc804 \ubcc4 \ub3d9\uc791 \ud655\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."]}),"\n",(0,d.jsxs)(n.h3,{id:"-\ud574\uacb0\ucc45-2--mapsid-\uc774\uc6a9\ud55c-\ub2e8\ubc29\ud5a5-\uacf5\uc720-pk-\ub9e4\ud551-\uac00\uc7a5-\uc548\uc815\uc801",children:["\u2705 \ud574\uacb0\ucc45 2 \u2013 ",(0,d.jsx)(n.code,{children:"@MapsId"})," \uc774\uc6a9\ud55c \ub2e8\ubc29\ud5a5 \uacf5\uc720 PK \ub9e4\ud551 (\uac00\uc7a5 \uc548\uc815\uc801)"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-java",children:'@Entity(name = "users")\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    // no reference to Account\n}\n\n@Entity\npublic class Account {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @OneToOne // FetchType fetch() default FetchType.EAGER;\n    @MapsId\n    @JoinColumn(name = "id")\n    private User user;\n}\n'})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"User"}),"\uc640 ",(0,d.jsx)(n.code,{children:"Account"}),"\uac00 \ub3d9\uc77c\ud55c PK\ub97c \uacf5\uc720\ud558\uba70, ",(0,d.jsx)(n.code,{children:"Account"}),"\uac00 ",(0,d.jsx)(n.code,{children:"User"}),"\uc758 ",(0,d.jsx)(n.code,{children:"ID"}),"\ub97c \uc678\ub798\ud0a4\ub85c\ub3c4 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\n\uc774\ub807\uac8c \ud558\uba74 \ubd88\ud544\uc694\ud55c \uc678\ub798\ud0a4 \uceec\ub7fc \uc5c6\uc774 \ub2e8\ubc29\ud5a5 \ub9e4\ud551\uc73c\ub85c \uad6c\uc131\ud560 \uc218 \uc788\uace0, \ud544\uc694\ud560 \ub54c ",(0,d.jsx)(n.code,{children:"EntityManager.find(Account.class, user.getId())"}),"\ucc98\ub7fc \uc9c1\uc811 \ud638\ucd9c\ud558\uc5ec \uc9c0\uc5f0 \ub85c\ub529\ucc98\ub7fc \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"@OneToOne"}),"\uc5d0 fetch \ud0c0\uc785\uc744 \uba85\uc2dc\ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0, \uae30\ubcf8\uac12\uc778 ",(0,d.jsx)(n.code,{children:"FetchType.EAGER"}),"\ub85c \ub3d9\uc791\ud569\ub2c8\ub2e4.",(0,d.jsx)(n.br,{}),"\n","\uc989, ",(0,d.jsx)(n.code,{children:"Account"}),"\ub97c \uc870\ud68c\ud558\uba74 \uc790\ub3d9\uc73c\ub85c ",(0,d.jsx)(n.code,{children:"User"}),"\ub3c4 \ud568\uaed8 \uc870\ud68c\ub429\ub2c8\ub2e4."]}),"\n",(0,d.jsx)(n.h2,{id:"-fetch-\ud0c0\uc785-\uae30\ubcf8-\uac12",children:"\ud83d\udccc fetch \ud0c0\uc785 \uae30\ubcf8 \uac12"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\uad00\uacc4 \uc5b4\ub178\ud14c\uc774\uc158"}),(0,d.jsx)(n.th,{children:"FetchType \uae30\ubcf8 \uac12"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@OneToOne"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FetchType.EAGER"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@ManyToOne"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FetchType.EAGER"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@OneToMany"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FetchType.LAZY"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@ManyToMany"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FetchType.LAZY"})})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"-\ub808\ud37c\ub7f0\uc2a4",children:"\ud83d\udd17 \ub808\ud37c\ub7f0\uc2a4"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://thorben-janssen.com/hibernate-tip-lazy-loading-one-to-one/",children:"Thorben Janssen - Hibernate Tip: How to lazily load one-to-one associations"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},8546:(e,n,s)=>{s.d(n,{A:()=>c});const c=s.p+"assets/images/one-to-one-result-7ce2a4f862e2eddab34181dd6876705b.png"},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var c=s(6540);const d={},t=c.createContext(d);function r(e){const n=c.useContext(t);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),c.createElement(t.Provider,{value:n},e.children)}}}]);