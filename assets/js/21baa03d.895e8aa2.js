"use strict";(self.webpackChunkjohnycho_dev=self.webpackChunkjohnycho_dev||[]).push([[8517],{2245:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"spring-framework/spring-actuator-micrometer","title":"Spring Boot Actuator\uc640 Micrometer","description":"\u2714\ufe0f Micrometer\ub780 \ubb34\uc5c7\uc774\uba70, \uc65c \uc0ac\uc6a9\ud560\uae4c?","source":"@site/docs/spring-framework/spring-actuator-micrometer.md","sourceDirName":"spring-framework","slug":"/spring-framework/spring-actuator-micrometer","permalink":"/docs/spring-framework/spring-actuator-micrometer","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"Spring","permalink":"/docs/tags/spring","description":"Spring Framework tag description"}],"version":"current","frontMatter":{"slug":"spring-actuator-micrometer","title":"Spring Boot Actuator\uc640 Micrometer","tags":["spring"]},"sidebar":"johnyDocsSidebar","previous":{"title":"Spring Framework","permalink":"/docs/category/spring-framework"},"next":{"title":"Spring Bean \uc5b4\ub178\ud14c\uc774\uc158","permalink":"/docs/spring-framework/spring-bean-annotations"}}');var i=t(4848),s=t(8453);const o={slug:"spring-actuator-micrometer",title:"Spring Boot Actuator\uc640 Micrometer",tags:["spring"]},c=void 0,a={},u=[{value:"\u2714\ufe0f <code>Micrometer</code>\ub780 \ubb34\uc5c7\uc774\uba70, \uc65c \uc0ac\uc6a9\ud560\uae4c?",id:"\ufe0f-micrometer\ub780-\ubb34\uc5c7\uc774\uba70-\uc65c-\uc0ac\uc6a9\ud560\uae4c",level:2},{value:"\u2714\ufe0f <code>Spring Boot Actuator</code>\uc640 <code>Micrometer</code>\uc758 \uad00\uacc4",id:"\ufe0f-spring-boot-actuator\uc640-micrometer\uc758-\uad00\uacc4",level:2},{value:"\u2714\ufe0f <code>Micrometer</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad\uc744 \uc0dd\uc131\ud558\ub294 \ubc29\ubc95",id:"\ufe0f-micrometer\ub97c-\uc0ac\uc6a9\ud558\uc5ec-\ucee4\uc2a4\ud140-\uba54\ud2b8\ub9ad\uc744-\uc0dd\uc131\ud558\ub294-\ubc29\ubc95",level:2},{value:"MeterRegistry",id:"meterregistry",level:3},{value:"Counter",id:"counter",level:3},{value:"Timer",id:"timer",level:3},{value:"Gauge",id:"gauge",level:3}];function m(e){const r={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.h2,{id:"\ufe0f-micrometer\ub780-\ubb34\uc5c7\uc774\uba70-\uc65c-\uc0ac\uc6a9\ud560\uae4c",children:["\u2714\ufe0f ",(0,i.jsx)(r.code,{children:"Micrometer"}),"\ub780 \ubb34\uc5c7\uc774\uba70, \uc65c \uc0ac\uc6a9\ud560\uae4c?"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"Micrometer"}),"\ub294 ",(0,i.jsx)("mark",{children:(0,i.jsx)(r.strong,{children:"\ubca4\ub354 \uc911\ub9bd\uc801\uc778 \uba54\ud2b8\ub9ad \uacc4\uce21 \ub77c\uc774\ube0c\ub7ec\ub9ac"})}),"\ub85c, \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ub2e4\uc591\ud55c \uc9c0\ud45c(\uc608: CPU \uc0ac\uc6a9\ub7c9, \uba54\ubaa8\ub9ac \uc18c\ube44, HTTP \uc694\uccad \ubc0f \ucee4\uc2a4\ud140 \uc774\ubca4\ud2b8)\ub97c \uc218\uc9d1\ud569\ub2c8\ub2e4. \uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 ",(0,i.jsx)(r.code,{children:"Prometheus"}),", ",(0,i.jsx)(r.code,{children:"Datadog"}),", ",(0,i.jsx)(r.code,{children:"Graphite"})," \ub4f1 \uc5ec\ub7ec \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c\uc5d0 \uba54\ud2b8\ub9ad\uc744 \uc804\uc1a1\ud560 \uc218 \uc788\ub3c4\ub85d \ub2e8\uc21c\ud558\uace0 \uc77c\uad00\ub41c API(\ud30c\uc0ac\ub4dc)\ub97c \uc81c\uacf5\ud558\uc5ec, \uac01 \ubc31\uc5d4\ub4dc \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \ubcf5\uc7a1\ud55c \uc138\ubd80 \uad6c\ud604\uc744 \uac10\ucda5\ub2c8\ub2e4. \ud2b9\ud788 ",(0,i.jsx)(r.code,{children:"Spring Boot Actuator"}),"\uc640 \uae4a\uc774 \ud1b5\ud569\ub418\uc5b4, \uae30\ubcf8 \uba54\ud2b8\ub9ad\uc744 \uc790\ub3d9\uc73c\ub85c \uc218\uc9d1\ud558\uace0 \ub178\ucd9c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,i.jsxs)(r.h2,{id:"\ufe0f-spring-boot-actuator\uc640-micrometer\uc758-\uad00\uacc4",children:["\u2714\ufe0f ",(0,i.jsx)(r.code,{children:"Spring Boot Actuator"}),"\uc640 ",(0,i.jsx)(r.code,{children:"Micrometer"}),"\uc758 \uad00\uacc4"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"Spring Boot Actuator"}),"\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc0c1\ud0dc, \ud5ec\uc2a4 \uccb4\ud06c, \ud658\uacbd, \ub85c\uadf8 \ub4f1 \uc5ec\ub7ec \uc6b4\uc601 \uc815\ubcf4\ub97c \ub178\ucd9c\ud558\ub294 \uad00\ub9ac \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. \ub0b4\ubd80\uc801\uc73c\ub85c ",(0,i.jsx)(r.code,{children:"Actuator"}),"\ub294 ",(0,i.jsx)(r.code,{children:"Micrometer"}),"\ub97c \uc0ac\uc6a9\ud558\uc5ec JVM, HTTP, \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ub4f1 \ub2e4\uc591\ud55c \uba54\ud2b8\ub9ad\uc744 \uc218\uc9d1\ud569\ub2c8\ub2e4. \uc989, ",(0,i.jsx)(r.code,{children:"Actuator"}),"\ub294 ",(0,i.jsx)("mark",{children:(0,i.jsx)(r.strong,{children:"\ubaa8\ub2c8\ud130\ub9c1 \ubc0f \uad00\ub9ac \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc81c\uacf5"})}),"\ud558\uace0, ",(0,i.jsx)(r.code,{children:"Micrometer"}),"\ub294 \uadf8 \ubc11\uc5d0\uc11c ",(0,i.jsx)("mark",{children:(0,i.jsx)(r.strong,{children:"\uc2e4\uc81c \uba54\ud2b8\ub9ad \ub370\uc774\ud130\ub97c \uacc4\uce21\ud558\uace0 \uc5ec\ub7ec \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c\uc73c\ub85c \uc804\uc1a1\ud558\ub294 \uc5ed\ud560"})}),"\uc744 \ub2f4\ub2f9\ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsxs)(r.h2,{id:"\ufe0f-micrometer\ub97c-\uc0ac\uc6a9\ud558\uc5ec-\ucee4\uc2a4\ud140-\uba54\ud2b8\ub9ad\uc744-\uc0dd\uc131\ud558\ub294-\ubc29\ubc95",children:["\u2714\ufe0f ",(0,i.jsx)(r.code,{children:"Micrometer"}),"\ub97c \uc0ac\uc6a9\ud558\uc5ec \ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad\uc744 \uc0dd\uc131\ud558\ub294 \ubc29\ubc95"]}),"\n",(0,i.jsxs)(r.p,{children:["\uc544\ub798\ub294 ",(0,i.jsx)(r.code,{children:"Micrometer"}),"\ub97c \ud65c\uc6a9\ud558\uc5ec \ucee4\uc2a4\ud140 \uba54\ud2b8\ub9ad(\uce74\uc6b4\ud130, \ud0c0\uc774\uba38, \uac8c\uc774\uc9c0)\uc744 \uc0dd\uc131\ud558\uace0 \uc5c5\ub370\uc774\ud2b8\ud558\ub294 \uc608\uc81c \ucf54\ub4dc\uc785\ub2c8\ub2e4. \uc774 \ucf54\ub4dc\ub294 HTTP \uc694\uccad\uc758 \uac74\uc218\uc640 \ucc98\ub9ac \uc2dc\uac04, \uadf8\ub9ac\uace0 \ud604\uc7ac \ud65c\uc131 \uc138\uc158 \uc218\ub97c \uce21\uc815\ud558\ub294 \uc608\uc81c\uc785\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-java",children:'package com.example.metrics;\n\nimport io.micrometer.core.instrument.Counter;\nimport io.micrometer.core.instrument.Gauge;\nimport io.micrometer.core.instrument.MeterRegistry;\nimport io.micrometer.core.instrument.Timer;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class CustomMetricsService {\n\n    private final Counter requestCounter;\n    private final Timer requestTimer;\n    private final CustomGauge customGauge;\n\n    // \uc0dd\uc131\uc790\uc5d0\uc11c MeterRegistry\ub97c \uc8fc\uc785\ubc1b\uc544 \ud544\uc694\ud55c \uba54\ud2b8\ub9ad\uc744 \ub4f1\ub85d\ud569\ub2c8\ub2e4.\n    public CustomMetricsService(MeterRegistry meterRegistry) {\n        // HTTP \uc694\uccad \ucd1d \uac74\uc218\ub97c \uc138\ub294 Counter (\ud0dc\uadf8\ub85c \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \uad6c\ubd84)\n        this.requestCounter = meterRegistry.counter("custom.requests.total", "endpoint", "/api/test");\n\n        // HTTP \uc694\uccad \ucc98\ub9ac \uc2dc\uac04\uc744 \uce21\uc815\ud558\ub294 Timer (\ud0dc\uadf8\ub85c \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \uad6c\ubd84)\n        this.requestTimer = meterRegistry.timer("custom.request.duration", "endpoint", "/api/test");\n\n        // Gauge: \uc608\ub97c \ub4e4\uc5b4, \ud604\uc7ac \ud65c\uc131 \uc138\uc158 \uc218\ub97c \uce21\uc815\ud558\uae30 \uc704\ud55c \ucee4\uc2a4\ud140 \uac1d\uccb4\ub97c \ub4f1\ub85d\n        this.customGauge = new CustomGauge();\n        Gauge.builder("custom.active.sessions", customGauge, CustomGauge::getActiveSessions)\n                .tag("region", "us-east")\n                .register(meterRegistry);\n    }\n\n    /**\n     * \uc2e4\uc81c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \uc2e4\ud589\ud560 \ub54c \uc694\uccad \uce74\uc6b4\ud2b8\uc640 \ucc98\ub9ac \uc2dc\uac04\uc744 \uce21\uc815\ud569\ub2c8\ub2e4.\n     * @param requestLogic \uc2e4\uc81c \ucc98\ub9ac\ud560 \ub85c\uc9c1 (\uc608: HTTP \uc694\uccad \ucc98\ub9ac)\n     */\n    public void processRequest(Runnable requestLogic) {\n        // \uc694\uccad \uc218 \uc99d\uac00\n        requestCounter.increment();\n        // \uc694\uccad \ucc98\ub9ac \uc2dc\uac04 \uce21\uc815\n        requestTimer.record(requestLogic);\n    }\n\n    /**\n     * \ud65c\uc131 \uc138\uc158 \uc218 \uc5c5\ub370\uc774\ud2b8 (\uc608\ub97c \ub4e4\uc5b4, \ub85c\uadf8\uc778/\ub85c\uadf8\uc544\uc6c3 \uc774\ubca4\ud2b8\uc5d0\uc11c \ud638\ucd9c)\n     * @param activeSessions \ud604\uc7ac \ud65c\uc131 \uc138\uc158 \uc218\n     */\n    public void updateActiveSessions(int activeSessions) {\n        customGauge.setActiveSessions(activeSessions);\n    }\n\n    /**\n     * \ucee4\uc2a4\ud140 Gauge\uc758 \uac12\uc744 \uc800\uc7a5\ud558\ub294 \ub0b4\ubd80 \ud074\ub798\uc2a4.\n     */\n    private static class CustomGauge {\n        // \ud604\uc7ac \ud65c\uc131 \uc138\uc158 \uc218\ub97c \uc800\uc7a5 (volatile\uc744 \uc0ac\uc6a9\ud574 \uc2a4\ub808\ub4dc \uc548\uc815\uc131 \ud655\ubcf4)\n        private volatile double activeSessions = 0;\n\n        public double getActiveSessions() {\n            return activeSessions;\n        }\n\n        public void setActiveSessions(double activeSessions) {\n            this.activeSessions = activeSessions;\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(r.h3,{id:"meterregistry",children:"MeterRegistry"}),"\n",(0,i.jsxs)(r.p,{children:["\uc0dd\uc131\uc790\uc5d0\uc11c MeterRegistry\ub97c \uc8fc\uc785\ubc1b\uc544 ",(0,i.jsx)("mark",{children:(0,i.jsx)(r.strong,{children:"\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ubaa8\ub4e0 \uba54\ud2b8\ub9ad\uc744 \uc911\uc559\uc5d0\uc11c \uad00\ub9ac\ud558\uace0, \uc124\uc815\ub41c \ubaa8\ub2c8\ud130\ub9c1 \ubc31\uc5d4\ub4dc\ub85c \uc8fc\uae30\uc801\uc73c\ub85c \uc804\uc1a1"})}),"\ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(r.h3,{id:"counter",children:"Counter"}),"\n",(0,i.jsx)(r.p,{children:"requestCounter\ub294 /api/test \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc5d0 \ub300\ud55c \uc694\uccad \uac74\uc218\ub97c \uce74\uc6b4\ud2b8\ud569\ub2c8\ub2e4. \ub9e4 HTTP \uc694\uccad\ub9c8\ub2e4 increment() \ud638\ucd9c\ub85c \uc99d\uac00\uc2dc\ud0b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(r.h3,{id:"timer",children:"Timer"}),"\n",(0,i.jsx)(r.p,{children:"requestTimer\ub294 HTTP \uc694\uccad \ucc98\ub9ac \uc2dc\uac04\uc744 \uce21\uc815\ud569\ub2c8\ub2e4. record() \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud574 \uc2e4\uc81c \ub85c\uc9c1 \uc2e4\ud589 \uc2dc\uac04\uc744 \uae30\ub85d\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(r.h3,{id:"gauge",children:"Gauge"}),"\n",(0,i.jsxs)(r.p,{children:["customGauge\ub294 \ud604\uc7ac \ud65c\uc131 \uc138\uc158 \uc218\ub97c \uce21\uc815\ud558\ub294 \ub370 \uc0ac\uc6a9\ub429\ub2c8\ub2e4. Gauge\ub294 \ud56d\uc0c1 \ud604\uc7ac \uc0c1\ud0dc\ub97c \uc870\ud68c\ud558\ub294 \ud568\uc218(getActiveSessions())\ub97c \ud638\ucd9c\ud558\uc5ec ",(0,i.jsx)("mark",{children:(0,i.jsx)(r.strong,{children:"\uc2e4\uc2dc\uac04 \uac12\uc744 \ubc18\uc601"})}),"\ud569\ub2c8\ub2e4."]})]})}function d(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>o,x:()=>c});var n=t(6540);const i={},s=n.createContext(i);function o(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);