"use strict";(self.webpackChunkjohnycho_dev=self.webpackChunkjohnycho_dev||[]).push([[4879],{1793:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"spring-framework/spring-private-transactional","title":"private \uba54\uc11c\ub4dc\uc5d0 @Transactional \uc120\uc5b8\ud558\uba74 \ud2b8\ub79c\uc7ad\uc158\uc774 \ub3d9\uc791\ud560\uae4c?","description":"\uae30\ubcf8\uc801\uc73c\ub85c @Transactional, @Cacheable, @Async \ub4f1\uc758 \uc560\ub108\ud14c\uc774\uc158\uc740 \ub7f0\ud0c0\uc784\uc5d0 \ub3d9\uc791\ud558\ub294 Spring AOP\ub97c \uae30\ubc18\uc73c\ub85c \ub3d9\uc791\ud569\ub2c8\ub2e4. Spring AOP\uac00 \uc81c\uacf5\ud558\ub294 JDK Dynamic Proxy, CGLIB \ubc29\uc2dd \ubaa8\ub450 \ud0c0\uae43\uc774 \uad6c\ud604\ud558\ub294 \uc778\ud130\ud398\uc774\uc2a4\ub098 \uad6c\uccb4 \ud074\ub798\uc2a4\ub97c \ub300\uc0c1\uc73c\ub85c \ud504\ub85d\uc2dc\ub97c \ub9cc\ub4e4\uc5b4\uc11c \ud0c0\uae43 \ud074\ub798\uc2a4\uc758 \uba54\uc11c\ub4dc \uc218\ud589 \uc804\ud6c4\uc5d0 \ud6a1\ub2e8 \uad00\uc2ec\uc0ac\uc5d0 \ub300\ud55c \ucc98\ub9ac\ub97c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","source":"@site/docs/spring-framework/spring-private-transactional.md","sourceDirName":"spring-framework","slug":"/spring-framework/spring-private-transactional","permalink":"/docs/spring-framework/spring-private-transactional","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"Spring","permalink":"/docs/tags/spring","description":"Spring Framework tag description"}],"version":"current","frontMatter":{"slug":"spring-private-transactional","title":"private \uba54\uc11c\ub4dc\uc5d0 @Transactional \uc120\uc5b8\ud558\uba74 \ud2b8\ub79c\uc7ad\uc158\uc774 \ub3d9\uc791\ud560\uae4c?","tags":["spring"]},"sidebar":"johnyDocsSidebar","previous":{"title":"\uc758\uc874\uc131 \uc8fc\uc785 (Dependency Injection)","permalink":"/docs/spring-framework/spring-dependency-injection"},"next":{"title":"Spring \ud2b8\ub79c\uc7ad\uc158 \uc804\ud30c (Transaction Propagation)","permalink":"/docs/spring-framework/spring-transaction-propagation"}}');var a=r(4848),t=r(8453);const c={slug:"spring-private-transactional",title:"private \uba54\uc11c\ub4dc\uc5d0 @Transactional \uc120\uc5b8\ud558\uba74 \ud2b8\ub79c\uc7ad\uc158\uc774 \ub3d9\uc791\ud560\uae4c?",tags:["spring"]},o=void 0,s={},l=[{value:"\u2714\ufe0f \uadf8\ub7ec\uba74 protected\ub098 public\uc73c\ub85c \uba54\uc11c\ub4dc\ub97c \ub9cc\ub4e4\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \ud2b8\ub79c\uc7ad\uc158\uc774 \ub3d9\uc791\ud560\uae4c?",id:"\ufe0f-\uadf8\ub7ec\uba74-protected\ub098-public\uc73c\ub85c-\uba54\uc11c\ub4dc\ub97c-\ub9cc\ub4e4\uba74-\uc815\uc0c1\uc801\uc73c\ub85c-\ud2b8\ub79c\uc7ad\uc158\uc774-\ub3d9\uc791\ud560\uae4c",level:2},{value:"\u2714\ufe0f \uc790\uae30 \uc790\uc2e0\uc744 \ud504\ub85d\uc2dc\ub85c \uc8fc\uc785 \ubc1b\ub294 \ubc29\ubc95",id:"\ufe0f-\uc790\uae30-\uc790\uc2e0\uc744-\ud504\ub85d\uc2dc\ub85c-\uc8fc\uc785-\ubc1b\ub294-\ubc29\ubc95",level:2},{value:"\u2714\ufe0f \ubcc4\ub3c4\uc758 \ud074\ub798\uc2a4\ub85c \ubd84\ub9ac\ud558\ub294 \ubc29\ubc95",id:"\ufe0f-\ubcc4\ub3c4\uc758-\ud074\ub798\uc2a4\ub85c-\ubd84\ub9ac\ud558\ub294-\ubc29\ubc95",level:2}];function d(n){const e={code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:["\uae30\ubcf8\uc801\uc73c\ub85c ",(0,a.jsx)(e.code,{children:"@Transactional"}),", ",(0,a.jsx)(e.code,{children:"@Cacheable"}),", ",(0,a.jsx)(e.code,{children:"@Async"})," \ub4f1\uc758 ",(0,a.jsx)("mark",{children:(0,a.jsx)(e.strong,{children:"\uc560\ub108\ud14c\uc774\uc158\uc740 \ub7f0\ud0c0\uc784\uc5d0 \ub3d9\uc791\ud558\ub294 Spring AOP\ub97c \uae30\ubc18\uc73c\ub85c \ub3d9\uc791"})}),"\ud569\ub2c8\ub2e4. Spring AOP\uac00 \uc81c\uacf5\ud558\ub294 ",(0,a.jsx)(e.code,{children:"JDK Dynamic Proxy"}),", ",(0,a.jsx)(e.code,{children:"CGLIB"})," \ubc29\uc2dd \ubaa8\ub450 \ud0c0\uae43\uc774 \uad6c\ud604\ud558\ub294 \uc778\ud130\ud398\uc774\uc2a4\ub098 \uad6c\uccb4 \ud074\ub798\uc2a4\ub97c \ub300\uc0c1\uc73c\ub85c \ud504\ub85d\uc2dc\ub97c \ub9cc\ub4e4\uc5b4\uc11c \ud0c0\uae43 \ud074\ub798\uc2a4\uc758 \uba54\uc11c\ub4dc \uc218\ud589 \uc804\ud6c4\uc5d0 \ud6a1\ub2e8 \uad00\uc2ec\uc0ac\uc5d0 \ub300\ud55c \ucc98\ub9ac\ub97c \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsxs)(e.p,{children:["Spring\uc740 \ube48 \uc0dd\uc131\uc2dc, \ud574\ub2f9 \ube48\uc5d0 AOP \uc560\ub108\ud14c\uc774\uc158\uc774 \uc788\ub294\uc9c0 \uac80\uc0ac\ud558\uace0, \uc788\ub2e4\uba74 \ud504\ub85d\uc2dc \uac1d\uccb4\ub97c \uc0dd\uc131\ud558\uc5ec \ube48\uc744 \ub300\uccb4\ud569\ub2c8\ub2e4. AOP \uc801\uc6a9 \ub300\uc0c1\uc778 \ud074\ub798\uc2a4\uc758 \uacbd\uc6b0, \uc989, ",(0,a.jsx)(e.code,{children:"@Transactional"}),"\uacfc \uac19\uc740 AOP \uc560\ub108\ud14c\uc774\uc158\uc774 \ud558\ub098\ub77c\ub3c4 \uc120\uc5b8\ub41c \ud074\ub798\uc2a4\ub294 \ud504\ub85d\uc2dc\ub85c \uac10\uc2f8\uc9d1\ub2c8\ub2e4."]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"JDK Dynamic Proxy"}),"\uc758 \uacbd\uc6b0 \ud0c0\uae43 \ud074\ub798\uc2a4\uac00 \uad6c\ud604\ud558\ub294 ",(0,a.jsx)("mark",{children:(0,a.jsx)(e.strong,{children:"\uc778\ud130\ud398\uc774\uc2a4\ub97c \uae30\uc900"})}),"\uc73c\ub85c ",(0,a.jsx)("mark",{children:(0,a.jsx)(e.strong,{children:"\ub7f0\ud0c0\uc784(Run-time)\uc5d0 \ud504\ub85d\uc2dc \ud074\ub798\uc2a4\ub97c \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131"})}),"\ud558\uc5ec ",(0,a.jsx)(e.code,{children:"public"})," \uba54\uc11c\ub4dc\ub9cc AOP \uc801\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4. ",(0,a.jsx)(e.code,{children:"CGLIB"})," \ubc29\uc2dd\uc758 \uacbd\uc6b0 ",(0,a.jsx)("mark",{children:(0,a.jsx)(e.strong,{children:"\uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\uc9c0 \uc54a\ub294 \ud074\ub798\uc2a4\ub97c \uc0c1\uc18d"})}),"\ud558\uc5ec \ud504\ub85d\uc2dc\ub97c \uc0dd\uc131\ud558\uace0, ",(0,a.jsx)(e.code,{children:"private"}),"\uc744 \uc81c\uc678\ud55c ",(0,a.jsx)(e.code,{children:"public"}),", ",(0,a.jsx)(e.code,{children:"protected"}),", ",(0,a.jsx)(e.code,{children:"package-private"})," \uba54\uc11c\ub4dc\uc5d0 AOP \uc801\uc6a9 \uac00\ub2a5\ud569\ub2c8\ub2e4."]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"CGLIB"}),"\uc740 ",(0,a.jsx)("mark",{children:(0,a.jsx)(e.strong,{children:"\uc6d0\ubcf8 \ud074\ub798\uc2a4\ub97c \uae30\uc900"})}),"\uc73c\ub85c ",(0,a.jsx)("mark",{children:(0,a.jsx)(e.strong,{children:"\ub7f0\ud0c0\uc784(Run-time)\uc5d0 \uc0c1\uc18d\uc744 \ud1b5\ud574 \ud504\ub85d\uc2dc \ud074\ub798\uc2a4\ub97c \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131"})}),"\ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c private \uba54\uc11c\ub4dc\ub294 \uc0c1\uc18d\uc774 \ubd88\uac00\ub2a5\ud558\uae30 \ub54c\ubb38\uc5d0 \ud504\ub85d\uc2dc\ub85c \ub9cc\ub4e4\uc5b4\uc9c0\uc9c0 \uc54a\ub294\uac83\uc774\uc8e0!"]}),"\n",(0,a.jsxs)(e.p,{children:["\uae30\ubcf8\uc801\uc73c\ub85c Spring AOP\ub294 ",(0,a.jsx)("mark",{children:(0,a.jsxs)(e.strong,{children:["\uc778\ud130\ud398\uc774\uc2a4\uac00 \uc788\ub294 \uacbd\uc6b0 ",(0,a.jsx)(e.code,{children:"JDK Dynamic Proxy"}),"\ub97c \uc0ac\uc6a9\ud558\uace0, \uc5c6\ub294 \uacbd\uc6b0 ",(0,a.jsx)(e.code,{children:"CGLIB"}),"\uc744 \uc0ac\uc6a9"]})}),"\ud569\ub2c8\ub2e4.\n\ud558\uc9c0\ub9cc, \uba85\uc2dc\uc801\uc73c\ub85c ",(0,a.jsx)(e.code,{children:"JDK Dynamic Proxy"}),"\ub97c \uac15\uc81c\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(e.h2,{id:"\ufe0f-\uadf8\ub7ec\uba74-protected\ub098-public\uc73c\ub85c-\uba54\uc11c\ub4dc\ub97c-\ub9cc\ub4e4\uba74-\uc815\uc0c1\uc801\uc73c\ub85c-\ud2b8\ub79c\uc7ad\uc158\uc774-\ub3d9\uc791\ud560\uae4c",children:"\u2714\ufe0f \uadf8\ub7ec\uba74 protected\ub098 public\uc73c\ub85c \uba54\uc11c\ub4dc\ub97c \ub9cc\ub4e4\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \ud2b8\ub79c\uc7ad\uc158\uc774 \ub3d9\uc791\ud560\uae4c?"}),"\n",(0,a.jsx)(e.p,{children:"\uc815\ub2f5\uc740 protected\uc77c \ub54c \ub610\ud55c \uc815\uc0c1 \ub3d9\uc791\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4\ud83e\udd72"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"@Transactional\nprotected void init(){...}\n"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"@Transactional\npublic void init(){...}\n"})}),"\n",(0,a.jsxs)(e.p,{children:["\ubd84\uba85\ud788 \uc778\ud154\ub9ac\uc81c\uc774\ub85c \ud655\uc778\uc744 \ud574\ubcf4\uba74 \ucef4\ud30c\uc77c \uc5d0\ub7ec\ub294 \ub098\uc624\uc9c0 \uc54a\ub294\ub370 \ub9d0\uc774\uc8e0. \ud574\ub2f9 \uc774\uc720\ub294 \uc55e\uc11c \ub9d0\ud588\ub358 ",(0,a.jsx)(e.code,{children:"JDK Dynamic Proxy"}),"\uac00 \uc6d0\uc778\uc774\uc5c8\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. ",(0,a.jsx)(e.code,{children:"JDK Dynamic Proxy"}),"\ub294 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uae30\ubc18\uc73c\ub85c \ub3d9\uc791\ud569\ub2c8\ub2e4. \ub530\ub77c\uc11c ",(0,a.jsx)(e.code,{children:"protected"})," \uba54\uc11c\ub4dc\uc5d0\uc11c\ub294 \ud504\ub85d\uc2dc\uac00 \ub3d9\uc791\ud560 \uc218 \uc5c6\ub294 \uac83\uc774\uc8e0. \uadf8\ub798\uc11c ",(0,a.jsx)("mark",{children:(0,a.jsxs)(e.strong,{children:["\uc2a4\ud504\ub9c1\uc5d0\uc11c\ub294 \uc77c\uad00\ub41c AOP\uc801\uc6a9\uc744 \uc704\ud574\uc11c ",(0,a.jsx)(e.code,{children:"protected"}),"\ub85c \uc120\uc5b8\ub41c \uba54\uc11c\ub4dc \ub610\ud55c \ud2b8\ub79c\uc7ad\uc158\uc774 \uac78\ub9ac\uc9c0 \uc54a\ub3c4\ub85d \ud55c \uac83"]})}),"\uc785\ub2c8\ub2e4. ",(0,a.jsx)(e.strong,{children:"\uc989, \ud504\ub85d\uc2dc \uc124\uc815\uc5d0 \ub530\ub77c \ud2b8\ub79c\uc7ad\uc158\uc774 \uc801\uc6a9\ub418\uc5c8\ub2e4 \uc548\ub418\uc5c8\ub2e4 \ud558\ub294 \ubcc0\uce59\uc801\uc778 \uacb0\uacfc\ub97c \ub9c9\uae30 \uc704\ud568"}),"\uc778\uac70\uc8e0."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'@Slf4j  \n@RequiredArgsConstructor  \n@Service  \npublic class SelfInvocation {  \n  \n    private final MemberRepository memberRepository;  \n  \n    public void outerSaveWithPublic(Member member) {  \n        saveWithPublic(member);  \n    }  \n  \n    @Transactional  \n    public void saveWithPublic(Member member) {  \n        log.info("call saveWithPublic");  \n        memberRepository.save(member);  \n        throw new RuntimeException("rollback test");  \n    }  \n  \n    public void outerSaveWithPrivate(Member member) {  \n        saveWithPrivate(member);  \n    }  \n  \n    @Transactional  \n    private void saveWithPrivate(Member member) {  \n        log.info("call saveWithPrivate");  \n        memberRepository.save(member);  \n        throw new RuntimeException("rollback test");  \n    }  \n}\n\npublic interface MemberRepository extends JpaRepository<Member, Long> {  \n}\n'})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'@SpringBootTest  \nclass SelfInvocationTest {  \n  \n    private static final Logger log = LoggerFactory.getLogger(SelfInvocationTest.class);  \n  \n    @Autowired  \n    private SelfInvocation selfInvocation;  \n  \n    @Autowired  \n    private MemberRepository memberRepository;  \n  \n    @AfterEach  \n    void tearDown() {  \n        memberRepository.deleteAllInBatch();  \n    }  \n  \n    @Test  \n    void aopProxyTest() {  \n        // @Transactional \uc560\ub108\ud14c\uc774\uc158\uc744 \uac00\uc9c0\uace0 \uc788\uc73c\ubbc0\ub85c, \ube48\uc774 Proxy \uac1d\uccb4\ub85c \ub300\uccb4\ub418\uc5b4 \uc8fc\uc785\ub41c\ub2e4.  \n        assertThat(AopUtils.isAopProxy(selfInvocation)).isTrue();  \n        // interface\ub97c \uad6c\ud604\ud558\uc9c0 \uc54a\uc740 \ud074\ub798\uc2a4\uc774\ubbc0\ub85c CGLIB Proxy\uac00 \uc0dd\uc131\ub41c\ub2e4.  \n        assertThat(AopUtils.isCglibProxy(selfInvocation)).isTrue();  \n    }  \n  \n    @Test  \n    void outerSaveWithPublic() {  \n        Member member = new Member("test");  \n  \n        try {  \n            selfInvocation.outerSaveWithPublic(member);  \n        } catch (RuntimeException e) {  \n            log.info("catch exception");  \n        }  \n  \n        List<Member> members = memberRepository.findAll();  \n        // self invocation \ubb38\uc81c\ub85c \uc778\ud574 \ud2b8\ub79c\uc7ad\uc158\uc774 \uc815\uc0c1 \ub3d9\uc791\ud558\uc9c0 \uc54a\uc74c.  \n        // \uc608\uc678 \ubc1c\uc0dd\uc73c\ub85c \uc778\ud55c \ub864\ubc31\uc774 \ub3d9\uc791\ud558\uc9c0 \uc54a\uace0 \ub0a8\uc544\uc788\uc74c.\n    \n      assertThat(members).hasSize(1);  \n    }  \n  \n    @Test  \n    void outerSaveWithPrivate() {  \n        try {  \n            selfInvocation.outerSaveWithPrivate(new Member("test"));  \n        } catch (RuntimeException e) {  \n            log.info("catch exception");  \n        }  \n  \n        List<Member> members = memberRepository.findAll();  \n  \n        // self invocation \ubb38\uc81c\ub85c \uc778\ud574 \ud2b8\ub79c\uc7ad\uc158\uc774 \uc815\uc0c1 \ub3d9\uc791\ud558\uc9c0 \uc54a\uc74c.  \n        // \uc608\uc678 \ubc1c\uc0dd\uc73c\ub85c \uc778\ud55c \ub864\ubc31\uc774 \ub3d9\uc791\ud558\uc9c0 \uc54a\uace0 \ub0a8\uc544\uc788\uc74c.\n        assertThat(members).hasSize(1);  \n    }  \n  \n    @Test  \n    void saveWithPublic() {  \n        Member member = new Member("test");  \n  \n        try {  \n            selfInvocation.saveWithPublic(member);  \n        } catch (RuntimeException e) {  \n            log.info("catch exception");  \n        }  \n  \n        List<Member> members = memberRepository.findAll();  \n  \n        // \uc678\ubd80\uc5d0\uc11c \ud504\ub85d\uc2dc \uac1d\uccb4\ub97c \ud1b5\ud574 \uba54\uc11c\ub4dc\uac00 \ud638\ucd9c\ub418\uc5c8\uae30 \ub54c\ubb38\uc5d0 \ud2b8\ub79c\uc7ad\uc158 \uc815\uc0c1 \ub3d9\uc791, \ub864\ubc31 \uc131\uacf5.  \n        assertThat(members).hasSize(0);  \n    }  \n}\n'})}),"\n",(0,a.jsx)(e.p,{children:"Spring AOP\ub294 \uc678\ubd80\uc5d0\uc11c \ud504\ub85d\uc2dc \uac1d\uccb4\ub97c \ud1b5\ud574 \uba54\uc11c\ub4dc\uac00 \ud638\ucd9c\ub420 \ub54c\ub9cc AOP \uc5b4\ub4dc\ubc14\uc774\uc2a4(\ud2b8\ub79c\uc7ad\uc158 \uad00\ub9ac)\ub97c \uc801\uc6a9\ud569\ub2c8\ub2e4. \uac19\uc740 \ud074\ub798\uc2a4 \ub0b4\uc5d0\uc11c \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud558\uba74, \ud504\ub85d\uc2dc\ub97c \uac70\uce58\uc9c0 \uc54a\uace0 \uc9c1\uc811 \ud638\ucd9c\ub418\ubbc0\ub85c \ud2b8\ub79c\uc7ad\uc158 \uc5b4\ub4dc\ubc14\uc774\uc2a4\uac00 \uc801\uc6a9\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(e.p,{children:"\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc790\uae30 \uc790\uc2e0\uc744 \ud504\ub85d\uc2dc\ub85c \uc8fc\uc785 \ubc1b\uc544 \ud504\ub85d\uc2dc\ub97c \ud1b5\ud574 \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud558\uac70\ub098, \ubcc4\ub3c4\uc758 \ud074\ub798\uc2a4\ub85c \ubd84\ub9ac\ud558\uac70\ub098, AspectJ\ub97c \uc774\uc6a9\ud558\ub294 \ubc29\ubc95\uc774 \uc788\uc2b5\ub2c8\ub2e4. AspectJ\ub97c \uc0ac\uc6a9\ud558\uba74 \ub3d9\uc77c \ud074\ub798\uc2a4 \ub0b4\uc5d0\uc11c\uc758 \uba54\uc11c\ub4dc \ud638\ucd9c\uc5d0\ub3c4 AOP \uc5b4\ub4dc\ubc14\uc774\uc2a4\ub97c \uc801\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(e.h2,{id:"\ufe0f-\uc790\uae30-\uc790\uc2e0\uc744-\ud504\ub85d\uc2dc\ub85c-\uc8fc\uc785-\ubc1b\ub294-\ubc29\ubc95",children:"\u2714\ufe0f \uc790\uae30 \uc790\uc2e0\uc744 \ud504\ub85d\uc2dc\ub85c \uc8fc\uc785 \ubc1b\ub294 \ubc29\ubc95"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'@Slf4j  \n@RequiredArgsConstructor  \n@Service  \npublic class SelfInvocation {  \n  \n    private final MemberRepository memberRepository;  \n    private final SelfInvocation selfInvocation;  \n  \n    public void outerSaveWithPublic(Member member) {  \n        selfInvocation.saveWithPublic(member);  \n    }  \n  \n    @Transactional  \n    public void saveWithPublic(Member member) {  \n        log.info("call saveWithPublic");  \n        memberRepository.save(member);  \n        throw new RuntimeException("rollback test");  \n    }\n    ...\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:"\ud83d\udea8 \uc774 \ubc29\ubc95\uc740 \uc21c\ud658 \uc758\uc874\uc131 \ubb38\uc81c\ub97c \uc77c\uc73c\ud0ac \uc218 \uc788\uc5b4 \uad8c\uc7a5\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(e.h2,{id:"\ufe0f-\ubcc4\ub3c4\uc758-\ud074\ub798\uc2a4\ub85c-\ubd84\ub9ac\ud558\ub294-\ubc29\ubc95",children:"\u2714\ufe0f \ubcc4\ub3c4\uc758 \ud074\ub798\uc2a4\ub85c \ubd84\ub9ac\ud558\ub294 \ubc29\ubc95"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'@Slf4j  \n@RequiredArgsConstructor  \n@Service  \npublic class TransactionService {  \n  \n    @Transactional  \n    public void outer() {  \n        log.info("call outer");  \n        logCurrentTransactionName();  \n        logActualTransactionActive();  \n        inner();  \n    }  \n  \n    @Transactional(propagation = Propagation.REQUIRES_NEW)  \n    public void inner() {  \n        log.info("call inner");  \n        logCurrentTransactionName();  \n        logActualTransactionActive();  \n    }  \n  \n    private void logActualTransactionActive() {  \n        boolean actualTransactionActive = TransactionSynchronizationManager.isActualTransactionActive();  \n        log.info("actualTransactionActive = {}", actualTransactionActive);  \n    }  \n  \n    private void logCurrentTransactionName() {  \n        String currentTransactionName = TransactionSynchronizationManager.getCurrentTransactionName();  \n        log.info("currentTransactionName = {}", currentTransactionName);  \n    }  \n}\n\n// \ub85c\uadf8\n// call outer  \n// currentTransactionName = server.transaction.TransactionService.outer  \n// actualTransactionActive = true  \n// call inner  \n// currentTransactionName = server.transaction.TransactionService.outer  \n// actualTransactionActive = true\n'})}),"\n",(0,a.jsxs)(e.p,{children:["outer\uac00 inner \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud558\ub294\ub370, outer\uc758 propagation \uc18d\uc131\uc740 ",(0,a.jsx)(e.code,{children:"REQUIRED"}),", inner\ub294 ",(0,a.jsx)(e.code,{children:"REQUIRES_NEW"}),"\ub85c \uc11c\ub85c \ub2e4\ub978 \ud2b8\ub79c\uc7ad\uc158\uc73c\ub85c \ubd84\ub9ac\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4. \ud558\uc9c0\ub9cc, \ub85c\uadf8\ub97c \ubcf4\uba74 \ub3d9\uc77c\ud55c outer\uc758 \ud2b8\ub79c\uc7ad\uc158\uc5d0 \uc18d\ud574\uc788\uc2b5\ub2c8\ub2e4. \uc774\ucc98\ub7fc \ud2b8\ub79c\uc7ad\uc158 \uc804\ud30c \uc18d\uc131\uc774 \ub2e4\ub978 \ub450 \uba54\uc11c\ub4dc\uac00 \ub3d9\uc77c\ud55c \ud074\ub798\uc2a4 \ub0b4\ubd80\uc5d0\uc11c self invocation \ud638\ucd9c\ud558\uba74 \uc758\ub3c4\ub300\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc774 \ub54c outer\uc640 inner \uba54\uc11c\ub4dc\ub97c \uac01\uac01 \ub2e4\ub978 \ud074\ub798\uc2a4\ub85c \ubd84\ub9ac\ud558\uc5ec \ud638\ucd9c\ud558\uba74 \ud574\uacb0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// OuterTransactionService\n@Slf4j  \n@RequiredArgsConstructor  \n@Service  \npublic class OuterTransactionService {  \n  \n    private final InnerTransactionService innerTransactionService;  \n  \n    @Transactional  \n    public void outer() {  \n        log.info("call outer");  \n        logCurrentTransactionName();  \n        logActualTransactionActive();  \n        innerTransactionService.inner();  \n    }  \n  \n    private void logActualTransactionActive() {  \n        boolean actualTransactionActive = TransactionSynchronizationManager.isActualTransactionActive();  \n        log.info("actualTransactionActive = {}", actualTransactionActive);  \n    }  \n  \n    private void logCurrentTransactionName() {  \n        String currentTransactionName = TransactionSynchronizationManager.getCurrentTransactionName();  \n        log.info("currentTransactionName = {}", currentTransactionName);  \n    }  \n}\n\n// InnerTransactionService\n@Slf4j  \n@RequiredArgsConstructor  \n@Service  \npublic class InnerTransactionService {  \n  \n    @Transactional(propagation = Propagation.REQUIRES_NEW)  \n    public void inner() {  \n        log.info("call inner");  \n        logCurrentTransactionName();  \n        logActualTransactionActive();  \n    }  \n  \n    private void logActualTransactionActive() {  \n        boolean actualTransactionActive = TransactionSynchronizationManager.isActualTransactionActive();  \n        log.info("actualTransactionActive = {}", actualTransactionActive);  \n    }  \n  \n    private void logCurrentTransactionName() {  \n        String currentTransactionName = TransactionSynchronizationManager.getCurrentTransactionName();  \n        log.info("currentTransactionName = {}", currentTransactionName);  \n    }  \n}\n\n// \ub85c\uadf8\n// call outer  \n// currentTransactionName = server.transaction.OuterTransactionService.outer  \n// actualTransactionActive = true  \n// call inner  \n// currentTransactionName = server.transaction.InnerTransactionService.inner  \n// actualTransactionActive = true\n'})}),"\n",(0,a.jsx)(e.p,{children:"\uc774\ucc98\ub7fc \uac01\uac01 \ud504\ub85d\uc2dc\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uac8c \ub450 \ud074\ub798\uc2a4\ub85c \ubd84\ub9ac\ud558\uba74 AOP \uc5b4\ub4dc\ubc14\uc774\uc2a4\uac00 \uc801\uc6a9\ub418\uc5b4 \uc758\ub3c4\ud55c \ub300\ub85c \ub3c5\ub9bd\uc801\uc778 \ud2b8\ub79c\uc7ad\uc158\uc744 \uc2dc\uc791\ud560 \uc218 \uc788\uac8c \ub410\uc2b5\ub2c8\ub2e4."})]})}function p(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>o});var i=r(6540);const a={},t=i.createContext(a);function c(n){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:c(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);