"use strict";(self.webpackChunkjohnycho_dev=self.webpackChunkjohnycho_dev||[]).push([[3775],{999:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"cs/cs-csrf","title":"\uc0ac\uc774\ud2b8 \uac04 \uc694\uccad \uc704\uc870(Cross-site Request Forgery, CSRF) \uacf5\uaca9","description":"\uc0ac\uc774\ud2b8 \uac04 \uc694\uccad \uc704\uc870(Cross-site Request Forgery, CSRF) \uacf5\uaca9\uc740 \uc0ac\uc6a9\uc790\uac00 \uc790\uc2e0\uc758 \uc758\uc9c0\uc640 \uc0c1\uad00\uc5c6\uc774 \uacf5\uaca9\uc790\uac00 \uc758\ub3c4\ud55c \ud589\uc704\ub97c \ud2b9\uc815 \uc6f9\uc0ac\uc774\ud2b8\uc5d0 \uc694\uccad\ud558\ub3c4\ub85d \ud558\ub294 \uac83\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4.","source":"@site/docs/cs/cs-csrf.md","sourceDirName":"cs","slug":"/cs/cs-csrf","permalink":"/docs/cs/cs-csrf","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"Computer Science","permalink":"/docs/tags/cs","description":"Computer Science tag description"},{"inline":false,"label":"Network","permalink":"/docs/tags/network","description":"Network tag description"}],"version":"current","frontMatter":{"slug":"cs-csrf","title":"\uc0ac\uc774\ud2b8 \uac04 \uc694\uccad \uc704\uc870(Cross-site Request Forgery, CSRF) \uacf5\uaca9","tags":["cs","network"]},"sidebar":"johnyDocsSidebar","previous":{"title":"CQRS(\uba85\ub839 \ucffc\ub9ac \ucc45\uc784 \ubd84\ub9ac) \ud328\ud134","permalink":"/docs/cs/cs-cqrs-pattern"},"next":{"title":"\uad50\ucc29 \uc0c1\ud0dc(deadlock)","permalink":"/docs/cs/cs-deadlock"}}');var i=r(4848),c=r(8453);const t={slug:"cs-csrf",title:"\uc0ac\uc774\ud2b8 \uac04 \uc694\uccad \uc704\uc870(Cross-site Request Forgery, CSRF) \uacf5\uaca9",tags:["cs","network"]},l=void 0,d={},o=[{value:"\u2714\ufe0f CSRF \uacf5\uaca9\uc740 \uc5b4\ub5bb\uac8c \ubc29\uc5b4\ud560 \uc218 \uc788\uc744\uae4c?",id:"\ufe0f-csrf-\uacf5\uaca9\uc740-\uc5b4\ub5bb\uac8c-\ubc29\uc5b4\ud560-\uc218-\uc788\uc744\uae4c",level:2},{value:"1) Referer \uc694\uccad \ud5e4\ub354 \uc0ac\uc6a9",id:"1-referer-\uc694\uccad-\ud5e4\ub354-\uc0ac\uc6a9",level:3},{value:"2) CSRF \ud1a0\ud070 \uc0ac\uc6a9",id:"2-csrf-\ud1a0\ud070-\uc0ac\uc6a9",level:3},{value:"3) SameSite \ucfe0\ud0a4 \uc0ac\uc6a9",id:"3-samesite-\ucfe0\ud0a4-\uc0ac\uc6a9",level:3},{value:"\ud83d\udccc SameSite \uc18d\uc131 \uc885\ub958",id:"-samesite-\uc18d\uc131-\uc885\ub958",level:4},{value:"4) \ube0c\ub77c\uc6b0\uc800\uc758 SOP(Same Origin Policy) \uc815\ucc45 \uc0ac\uc6a9",id:"4-\ube0c\ub77c\uc6b0\uc800\uc758-sopsame-origin-policy-\uc815\ucc45-\uc0ac\uc6a9",level:3},{value:"\ud83d\udccc \ucd9c\ucc98(Origin)\ub780?",id:"-\ucd9c\ucc98origin\ub780",level:4},{value:"5) CORS \uc124\uc815",id:"5-cors-\uc124\uc815",level:3}];function h(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"\uc0ac\uc774\ud2b8 \uac04 \uc694\uccad \uc704\uc870(Cross-site Request Forgery, CSRF) \uacf5\uaca9"}),"\uc740 \uc0ac\uc6a9\uc790\uac00 \uc790\uc2e0\uc758 \uc758\uc9c0\uc640 \uc0c1\uad00\uc5c6\uc774 \uacf5\uaca9\uc790\uac00 \uc758\ub3c4\ud55c \ud589\uc704\ub97c \ud2b9\uc815 \uc6f9\uc0ac\uc774\ud2b8\uc5d0 \uc694\uccad\ud558\ub3c4\ub85d \ud558\ub294 \uac83\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsxs)(s.p,{children:["\uc608\ub97c \ub4e4\uc5b4, \ud2b9\uc815 \uc0ac\uc6a9\uc790\uac00 \uc11c\ube44\uc2a4\uc5d0\uc11c \ub85c\uadf8\uc778\uc744 \uc218\ud589\ud558\uace0 \uc11c\ubc84\ub294 \ud574\ub2f9 \uc0ac\uc6a9\uc790\uc5d0 \ub300\ud55c \uc138\uc158 ID\ub97c ",(0,i.jsx)(s.code,{children:"Set-Cookie"})," \ud5e4\ub354\uc5d0 \ub2f4\uc544\uc11c \uc751\ub2f5\ud569\ub2c8\ub2e4. \uadf8\ub9ac\uace0, \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 \ucfe0\ud0a4\ub97c \uc800\uc7a5\ud558\uace0 \uc694\uccad\ub9c8\ub2e4 \uc790\ub3d9\uc73c\ub85c \uc804\ub2ec\ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(s.p,{children:"\uc774\ub7ec\ud55c \uc0ac\uc6a9\uc790\ub97c \ub300\uc0c1\uc73c\ub85c \uacf5\uaca9\uc790\ub294 \uc545\uc131 \uc2a4\ud06c\ub9bd\ud2b8\uac00 \ub2f4\uae34 \ud398\uc774\uc9c0\uc5d0 \uc811\uc18d\ud558\ub3c4\ub85d \uc720\ub3c4\ud569\ub2c8\ub2e4. \uc720\ub3c4\ud558\ub294 \ubc29\ubc95\uc740 \ub2e4\uc591\ud55c\ub370\uc694. \uc545\uc131 \uc2a4\ud06c\ub9bd\ud2b8\uac00 \ud3ec\ud568\ub41c \uba54\uc77c\uc774\ub098 \uac8c\uc2dc\uae00\uc744 \uc791\uc131\ud558\uac70\ub098, \uc545\uc131 \uc2a4\ud06c\ub9bd\ud2b8\uac00 \ud3ec\ud568\ub41c \uacf5\uaca9\uc790 \uc0ac\uc774\ud2b8 \uc811\uc18d \ub9c1\ud06c\ub97c \uc804\ub2ec\ud558\ub294 \uac83\uc774 \ub300\ud45c\uc801\uc785\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"\uc0ac\uc6a9\uc790\uac00 \uc545\uc131 \uc2a4\ud06c\ub9bd\ud2b8\uac00 \ud3ec\ud568\ub41c \ud398\uc774\uc9c0\uc5d0 \uc811\uc18d\ud558\uac8c \ub418\uba74 \uc545\uc131 \uc2a4\ud06c\ub9bd\ud2b8\uac00 \uc2e4\ud589\ub429\ub2c8\ub2e4. \uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub294 \uc0ac\uc6a9\uc790\uc758 \uc758\ub3c4\uc640 \uc0c1\uad00\uc5c6\ub294 \ud2b9\uc815\ud55c \uc694\uccad(\uacb0\uc81c, \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd)\uc744 \uacf5\uaca9 \ub300\uc0c1 \uc11c\ubc84\ub85c \ubcf4\ub0b4\ub3c4\ub85d \uad6c\ud604\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ud574\ub2f9 \uc694\uccad\uc740 \ube0c\ub77c\uc6b0\uc800\uc5d0 \uc758\ud574\uc11c \uc790\ub3d9\uc73c\ub85c \ucfe0\ud0a4\uc5d0 \uc800\uc7a5\ub41c \uc138\uc158 ID\uac00 \ud568\uaed8 \uc804\ub2ec\ub429\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.p,{children:"\uc608\ub97c \ub4e4\uc5b4, \uacf5\uaca9\uc790\uac00 \ub9cc\ub4e0 \uc0ac\uc774\ud2b8 \ub0b4\ubd80\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ud0dc\uadf8\uac00 \uc874\uc7ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-html",children:'<img src ="https://johnycho.com/member/changePassword?newValue=1234" />\n'})}),"\n",(0,i.jsx)(s.p,{children:"\uacf5\uaca9\uc790 \uc0ac\uc774\ud2b8\uc5d0 \ubc29\ubb38\ud55c \uc0ac\uc6a9\uc790\ub294 \uc790\uc2e0\uc758 \uc758\uc9c0\uc640 \ubb34\uad00\ud558\uac8c img \ud0dc\uadf8\ub85c \uc778\ud574 \uc138\uc158 ID\uac00 \ud3ec\ud568\ub41c \ucfe0\ud0a4\uc640 \ud568\uaed8 \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc694\uccad\uc744 \uc11c\ubc84\ub85c \uc804\ub2ec\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.h2,{id:"\ufe0f-csrf-\uacf5\uaca9\uc740-\uc5b4\ub5bb\uac8c-\ubc29\uc5b4\ud560-\uc218-\uc788\uc744\uae4c",children:"\u2714\ufe0f CSRF \uacf5\uaca9\uc740 \uc5b4\ub5bb\uac8c \ubc29\uc5b4\ud560 \uc218 \uc788\uc744\uae4c?"}),"\n",(0,i.jsx)(s.p,{children:"\uad50\ucc28 \ucd9c\ucc98\uc778 \uc0c1\ud669\uc5d0\uc11c\uc758 \uc694\uccad\uc744 \ub9c9\ub294 \ubc29\uc2dd\uc73c\ub85c CSRF\ub97c \ubc29\uc5b4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.h3,{id:"1-referer-\uc694\uccad-\ud5e4\ub354-\uc0ac\uc6a9",children:"1) Referer \uc694\uccad \ud5e4\ub354 \uc0ac\uc6a9"}),"\n",(0,i.jsxs)(s.p,{children:["Referer\ub294 \ube0c\ub77c\uc6b0\uc800\uac00 \ud604\uc7ac \uc694\uccad\uc5d0 \ub300\ud55c \uc6f9 \ud398\uc774\uc9c0\uc758 \uc8fc\uc18c(\ucd9c\ucc98)\ub97c \uc11c\ubc84\uc5d0 \uc54c\ub824\uc8fc\ub294 HTTP \uc694\uccad \ud5e4\ub354\uc785\ub2c8\ub2e4.\n\ud574\ub2f9 \uc8fc\uc18c\uc640 Host(\uc11c\ubc84\uc758 \ub3c4\uba54\uc778 \uc774\ub984) \ud5e4\ub354\ub97c \ube44\uad50\ud558\uc5ec \ub2e4\ub978 \uacbd\uc6b0, \uc608\uc678\ub97c \ubc1c\uc0dd\uc2dc\ud0ac \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud558\uc9c0\ub9cc, ",(0,i.jsx)("mark",{children:(0,i.jsx)(s.strong,{children:"Referer \uc694\uccad \ud5e4\ub354\ub294 \uc870\uc791\ub420 \uc218 \uc788\ub2e4\ub294 \uc810"})}),"\uc5d0\uc11c \ud55c\uacc4\uac00 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-html",children:"GET /page HTTP/1.1\nHost: example.com\nReferer: https://google.com/search?q=example\n"})}),"\n",(0,i.jsx)(s.p,{children:"\ud83d\udc49\ud83c\udffb \uc11c\ubc84\ub294 \uc774 \uc694\uccad\uc774 google.com \uac80\uc0c9 \uacb0\uacfc\ub97c \ud074\ub9ad\ud574\uc11c \uc628 \uac83\uc784\uc744 \uc54c \uc218 \uc788\uc74c"}),"\n",(0,i.jsx)(s.h3,{id:"2-csrf-\ud1a0\ud070-\uc0ac\uc6a9",children:"2) CSRF \ud1a0\ud070 \uc0ac\uc6a9"}),"\n",(0,i.jsx)(s.p,{children:"\ud15c\ud50c\ub9bf \uc5d4\uc9c4 \uae30\uc220(JSP, \ud0c0\uc784\ub9ac\ud504, Pug, Ejs \ub4f1)\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\ub294 \uacbd\uc6b0\ub77c\uba74 CSRF \ud1a0\ud070\uc744 \uc0ac\uc6a9\ud574 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \uc0dd\uc131\ud558\uae30 \uc774\uc804\uc5d0 \uc0ac\uc6a9\uc790 \uc138\uc158\uc5d0 \uc784\uc758\uc758 CSRF \ud1a0\ud070\uc744 \uc800\uc7a5\ud569\ub2c8\ub2e4. \uadf8\ub9ac\uace0, \ud2b9\uc815 API \uc694\uccad\uc5d0 \ub300\ud55c \uc81c\ucd9c \ud3fc\uc744 \uc0dd\uc131\ud560 \ub54c \ud574\ub2f9 CSRF \ud1a0\ud070\uac12\uc774 \uc124\uc815\ub41c input \ud0dc\uadf8\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-html",children:'<input type = "hidden" name = "csrf_token" value = "csrf_token_12341234" />\n'})}),"\n",(0,i.jsx)(s.p,{children:"\uc2e4\uc81c\ub85c \uc694\uccad\uc774 \uc804\ub2ec\ub420 \ub54c, \ud574\ub2f9 input \ud0dc\uadf8\uc758 CSRF \ud1a0\ud070\uacfc \uc0ac\uc6a9\uc790 \uc138\uc158 \ub0b4\ubd80\uc5d0 \uc874\uc7ac\ud558\ub294 CSRF \ud1a0\ud070\uc758 \uc77c\uce58 \uc5ec\ubd80\ub97c \ud310\ub2e8\ud558\uc5ec, CSRF \uacf5\uaca9\uc5d0 \ub300\ud574 \ubc29\uc5b4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.h3,{id:"3-samesite-\ucfe0\ud0a4-\uc0ac\uc6a9",children:"3) SameSite \ucfe0\ud0a4 \uc0ac\uc6a9"}),"\n",(0,i.jsx)(s.p,{children:"\uc6f9 \ube0c\ub77c\uc6b0\uc800\uac00 \ucfe0\ud0a4\ub97c \uc694\uccad\uc5d0 \ud3ec\ud568\uc2dc\ud0ac \ub54c\uc758 \ucd9c\ucc98(Origin)\ub97c \uae30\uc900\uc73c\ub85c, \uc5b4\ub5a4 \uacbd\uc6b0\uc5d0 \ud5c8\uc6a9\ud560\uc9c0\ub97c \uc81c\uc5b4\ud558\ub294 \ubcf4\uc548 \uc18d\uc131\uc785\ub2c8\ub2e4.\n\uc989, \ucfe0\ud0a4\uac00 \uc694\uccad\uc5d0 \ud3ec\ud568\ub420 \uc218 \uc788\ub294 \ubc94\uc704\ub97c \uc81c\uc5b4\ud558\uc5ec CSRF(\uc0ac\uc774\ud2b8 \uac04 \uc694\uccad \uc704\uc870) \uac19\uc740 \uacf5\uaca9\uc744 \ub9c9\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.h4,{id:"-samesite-\uc18d\uc131-\uc885\ub958",children:"\ud83d\udccc SameSite \uc18d\uc131 \uc885\ub958"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"\uc18d\uc131 \uac12"}),(0,i.jsx)(s.th,{children:"\uc124\uba85"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Strict"})}),(0,i.jsx)(s.td,{children:"\uc644\uc804\ud788 \uac19\uc740 \ucd9c\ucc98\uc77c \ub54c\ub9cc \ucfe0\ud0a4 \uc804\uc1a1. \uc678\ubd80 \ub9c1\ud06c \ud074\ub9ad \uc2dc \ucfe0\ud0a4 \uc548 \ubcf4\ub0b4\uc9d0."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Lax"})}),(0,i.jsx)(s.td,{children:"\uae30\ubcf8\uac12. GET \uc694\uccad\uc5d0 \ud55c\ud574 \uc678\ubd80 \ucd9c\ucc98\uc5d0\uc11c\ub3c4 \ucfe0\ud0a4 \uc804\uc1a1 \ud5c8\uc6a9. POST \ub4f1\uc740 \uc548 \ub428."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"None"})}),(0,i.jsx)(s.td,{children:"\ucd9c\ucc98\uc5d0 \uc0c1\uad00\uc5c6\uc774 \ubaa8\ub4e0 \uc694\uccad\uc5d0 \ucfe0\ud0a4 \uc804\uc1a1. \ub2e8, Secure(HTTPS) \ud544\uc218."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"4-\ube0c\ub77c\uc6b0\uc800\uc758-sopsame-origin-policy-\uc815\ucc45-\uc0ac\uc6a9",children:"4) \ube0c\ub77c\uc6b0\uc800\uc758 SOP(Same Origin Policy) \uc815\ucc45 \uc0ac\uc6a9"}),"\n",(0,i.jsx)(s.p,{children:"\uc6f9 \ube0c\ub77c\uc6b0\uc800\uc758 \ubcf4\uc548 \uc815\ucc45 \uc911 \ud558\ub098\ub85c, \uc6f9 \ud398\uc774\uc9c0\uac00 \uc790\uc2e0\uc774 \ub85c\ub4dc\ub41c \ucd9c\ucc98(Origin)\uc640 \ub2e4\ub978 \ucd9c\ucc98\uc758 \ub9ac\uc18c\uc2a4\uc5d0 \uc811\uadfc\ud558\uc9c0 \ubabb\ud558\ub3c4\ub85d \uc81c\ud55c\ud558\ub294 \uaddc\uce59\uc785\ub2c8\ub2e4."}),"\n",(0,i.jsx)(s.h4,{id:"-\ucd9c\ucc98origin\ub780",children:"\ud83d\udccc \ucd9c\ucc98(Origin)\ub780?"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"\uad6c\uc131 \uc694\uc18c"}),(0,i.jsx)(s.th,{children:"\uc608\uc2dc"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"\ud504\ub85c\ud1a0\ucf5c"}),(0,i.jsx)(s.td,{children:"http, https"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"\ud638\uc2a4\ud2b8"}),(0,i.jsx)(s.td,{children:"example.com"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"\ud3ec\ud2b8"}),(0,i.jsx)(s.td,{children:"80, 443, 8080 \ub4f1"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:["\ud83d\udc49\ud83c\udffb ",(0,i.jsx)(s.code,{children:"http://example.com:80"})," \uc640 ",(0,i.jsx)(s.code,{children:"https://example.com:443"}),"\ub294 \ub2e4\ub978 Origin \uc785\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(s.h3,{id:"5-cors-\uc124\uc815",children:"5) CORS \uc124\uc815"}),"\n",(0,i.jsxs)(s.p,{children:["\ub2e4\ub978 \ucd9c\ucc98(Origin)\uc758 \ub9ac\uc18c\uc2a4\ub97c \uc694\uccad\ud560 \uc218 \uc788\ub3c4\ub85d \ud5c8\uc6a9\ud558\ub294 HTTP \ubcf4\uc548 \uae30\ub2a5\uc73c\ub85c, \ube0c\ub77c\uc6b0\uc800\uc758 SOP(Same-Origin Policy) \uc81c\ud55c\uc744 \uc6b0\ud68c\ud558\uae30 \uc704\ud55c \uc11c\ubc84 \uc124\uc815\uc785\ub2c8\ub2e4. ",(0,i.jsx)(s.a,{href:"./cs-cors",children:"\uc790\uc138\ud55c \ub0b4\uc6a9\uc740 CORS \ubb38\uc11c \ucc38\uace0"})]})]})}function a(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>t,x:()=>l});var n=r(6540);const i={},c=n.createContext(i);function t(e){const s=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),n.createElement(c.Provider,{value:s},e.children)}}}]);